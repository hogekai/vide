## 3.3 Ad

TOC Schema

The `<Ad>` element may contain an `<InLine>` ad or a `<Wrapper>`. The wrapper points to a secondary server for another VAST response, which may be another wrapper or an InLine response. An InLine response contains the ad creative necessary to execute ad playback.

### 3.3.1 Ad Pods and Stand-Alone Ads

TOC Schema

While a single `<Ad>` element represents the most common VAST response, multiple ads may be included as either stand-alone ads or a Pod of ads, or a mix of both. Ads in a Pod are distinguished by using the `sequence` attribute for an `<Ad>`, denoting which ad plays first, second, and so on. If the player supports Ad Pods, sequenced ads are played in numerical order and all ads in the Pod should be played to the best of the player's ability. All `sequence` values in a VAST response must be unique.

Non-sequenced ads, are stand-alone ads and considered part of an "ad buffet" from which the player may select one or more ad to play in any order. Stand-alone ads may be included in a VAST response with an Ad Pod and may be used to substitute an ad in the Pod when an ad cannot be played.

The following diagram illustrates some options for how the `<Ad>` element may be represented in a VAST response.

[Figure: Three VAST response structures shown side by side. Left: "Typical" — a VAST box containing a single Ad box. Center: "Ad Pod" — a VAST box containing Ad1 and Ad2 boxes. Right: "Ad Pod with Ad Buffet" — a VAST box containing Ad1, Ad2, and a standalone Ad box.]

If the media player cannot display an entire Ad Pod or any stand-alone ads, it can decline from loading the ad resources and use the error URI, if provided, to notify the server.

**Playing a Pod of Ads**
When electing to play a Pod of ads returned by the ad server, the media player must play the ads in the Pod in the prescribed sequence and should play as many of the ads as possible. The player may elect to truncate any ads at the end of an Ad Pod if either: the ads cannot be played because they cannot physically fit into the ad break in the stream (such as when time is limited in a live stream) or if the Pod violated any limits specified by the media player request (for example: number of ads to return, or maximum pod duration).

When an Ad Pod is the result of following a VAST `<Wrapper>` the same impression and tracking URIs in the VAST `<Wrapper>` are called as each ad in the Pod is played.

Should an ad in the Pod fail to play, the media player should substitute an un-played stand-alone ad from the response. If stand-alone ads are unavailable, the player should move on to the next ad in the Ad Pod.

If a Wrapper is used to provide an ad in the Ad Pod, the Wrapper can use attributes, `allowMultipleAds=false` and `fallbackOnNoAd=false,sequenceAttribute` to prevent performance issues that result from an unmanaged string of Wrappers and multiple ads in an Ad Pod.

> **Media Player Implementation Note**
> If multiple `<Ad>` elements are provided with **sequence** attributes and the player supports Ad Pods, all ads in the Pod must be played to the best of the player's ability. If not supported or the Pod cannot be played, the media player should use the error-tracking URI, if provided, to notify the server.
>
> A special exemption exists when using VMAP. Please visit http://iab.com/vmap for information on VMAP.

### 3.3.2 The Ad Element

TOC Schema

Properties for the `<Ad>` element are listed in the following table.

| Player Support | Required (Ad Pod support is optional) |
|---|---|
| Required in Response | Yes (unless there is no ad to return, in which case `<Error>` should be used to provide an error URI) |
| Parent | VAST |
| Bounded | 0+ (In a no ad response, `<Ad>` is not allowed, but in all other cases at least one `<Ad>` is required.) |
| Sub-Elements | InLine* Wrapper* |

| Attributes | Description |
|---|---|
| **id** | An ad server-defined identifier string for the ad |
| **sequence** | A integer greater than zero (0) that identifies the sequence in which an ad should play; all `<Ad>` elements with sequence values are part of a pod and are intended to be played in sequence |
| **conditionalAd** | [Deprecated in VAST 4.1, along with apiFramework] A Boolean that identifies a conditional ad. In the case of programmatic ad serving, a VPAID ad unit or other mechanism might be used to decide whether there is an ad that matches the placement. When there is no match, an ad may not be served. Use of the `conditionalAd` attribute enables publishers to avoid accepting these ads in placements where an ad must be served. A value of `true` indicates that the ad is conditional and should be used in all cases where the InLine executable unit (such as VPAID) is not an ad but is instead a framework for finding an ad; a value of `false` is the default value and indicates that an ad is available. |
| **adType** | An optional string that identifies the type of ad. This allows VAST to support audio ad scenarios. Possible values – video, audio, hybrid. Default value – video (assumed to be video if attribute is not present). More details on the use case in section 1.5 |

\*The Ad element requires exactly one child, which can either be an \<InLine\> or \<Wrapper\> element.